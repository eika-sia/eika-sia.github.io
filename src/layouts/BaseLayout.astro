---
import '../styles/global.css';
import { site } from '../site.config';
---
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{site.title}</title>
    <meta name="description" content={site.description}>
    <link rel="canonical" href={site.url + Astro.url.pathname} />
    <link rel="alternate" type="application/rss+xml" title={site.title + ' RSS'} href="/rss.xml" />
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content={site.title} />
    <meta property="og:title" content={site.title} />
    <meta property="og:description" content={site.description} />
    <meta property="og:url" content={site.url + Astro.url.pathname} />
    <meta property="og:image" content={site.url + '/favicon.svg'} />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={site.title} />
    <meta name="twitter:description" content={site.description} />
    <meta name="twitter:image" content={site.url + '/favicon.svg'} />
    <script type="application/ld+json">{JSON.stringify({
      '@context':'https://schema.org',
      '@type':'Person',
      name: site.author,
      url: site.url,
      email: site.email,
      sameAs: [
        'https://github.com/eika-sia'
      ]
    })}</script>
  </head>
  <body class="min-h-screen smooth-colors">
    <!-- Navigation Header -->
    <nav class="site-nav max-w-7xl mx-auto flex items-center justify-between smooth-colors relative">
      <a href="/" class="nav-link home-link text-slate-100 font-semibold tracking-tight text-lg md:text-xl hover:text-[var(--accent)] transition-colors relative">
        Homepage
        <span class="nav-active-indicator" data-path="/"></span>
      </a>
      <div class="nav-links">
        <a href="/blog" class="nav-link text-slate-300 hover:text-[var(--accent)] transition-colors relative">
          Blog
          <span class="nav-active-indicator" data-path="/blog"></span>
        </a>
        <a href="/projects" class="nav-link text-slate-300 hover:text-[var(--accent)] transition-colors relative">
          Projects
          <span class="nav-active-indicator" data-path="/projects"></span>
        </a>
        <a href="/cv" class="nav-link text-slate-300 hover:text-[var(--accent)] transition-colors relative">
          CV
          <span class="nav-active-indicator" data-path="/cv"></span>
        </a>
      </div>
    </nav>

    <main class="max-w-7xl mx-auto px-6 md:px-10 lg:px-14 xl:px-16 pb-24 content-visibility-auto">
      <div class="panel px-8 sm:px-12 md:px-18 lg:px-20 xl:px-24 2xl:px-28 py-14 md:py-18 space-y-26 md:space-y-34 smooth-colors content-visibility-auto">
        <slot />
      </div>
    </main>
  <!-- Theme switching removed; locked to modern blue / purple / pink palette -->
  </body>
</html>

<style>
.nav-active-indicator { position:absolute; left:10%; right:70%; bottom:0; height:2px; background:var(--gradient-accent); opacity:0; transform-origin:left center; transform:scaleX(.25); transition:opacity .35s, transform .5s cubic-bezier(.65,.05,.36,1), left .5s, right .5s; border-radius:0; }
.nav-link:hover .nav-active-indicator { opacity:.55; transform:scaleX(1); right:10%; }
.nav-link.is-active .nav-active-indicator { opacity:1; transform:scaleX(1); left:0; right:0; }
</style>
<script>
  const path = window.location.pathname.replace(/\/$/, '') || '/';
  document.querySelectorAll('.nav-link').forEach(link => {
    const indicator = link.querySelector('.nav-active-indicator');
    if(!indicator) return;
    const target = indicator.getAttribute('data-path');
    if(target === path) {
      link.classList.add('is-active');
    }
  });
</script>
